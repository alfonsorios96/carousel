<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="carousel-slider.html">

<dom-module id="carousel-app">
    <template>
        <style>
            :host {
                display: block;
            }
        </style>
        <carousel-slider sliders="[[items]]" current="[[current]]">
            <slot id="slot"></slot>
        </carousel-slider>
    </template>

    <script>
        (function CarouselAppDefinition(customElements) {
            'use strict';

            /**
             * @customElement
             * @polymer
             */
            class CarouselApp extends Polymer.Element {
                static get is() {
                    return 'carousel-app';
                }

                connectedCallback() {
                    super.connectedCallback();
                    const slot = this.$.slot;
                    let listNodes = slot.assignedNodes({flatten: true});
                    let isCurrent = true;
                    listNodes.forEach(node => {
                        let result = [];
                        if (node.className !== undefined) {
                            this.push('items', {
                                node: node,
                                isCurrent: isCurrent
                            });
                            if (isCurrent) {
                                isCurrent = false;
                            }
                        }
                        return result;
                    });
                    console.log(this.items);
                }

                static get properties() {
                    return {
                        items: {
                            type: Array,
                            value() {
                                return [];
                            }
                        },
                        current: {
                            type: Number,
                            value: 0
                        }
                    };
                }
            }

            window.customElements.define(CarouselApp.is, CarouselApp);
        })(window.customElements);
    </script>
</dom-module>
