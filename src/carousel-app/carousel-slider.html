<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="carousel-button.html">
<link rel="import" href="../../bower_components/polymer/lib/elements/dom-repeat.html">
<link rel="import" href="../../bower_components/polymer/lib/elements/dom-if.html">

<!--GERARDO-->
<link rel="import" href="carousel-item.html">
<!--FIN GERARDO-->

<dom-module id="carousel-slider">
    <template>
        <style>
            .container {
                display: flex;
                align-items: center;
                justify-content: space-around;
            }
        </style>
        <div class="container">
            <carousel-button direction="left"
                             image-url="../../assets/button_back.png"
                             on-button-clicked="_handlerButton"></carousel-button>
            <template is="dom-repeat" items="[[sliders]]">
                <template is="dom-if" if="[[item.isCurrent]]">
                    <!--GERARDO-->
                    <carousel-item element="[[item]]"></carousel-item>
                    <!--FIN GERARDO-->

                </template>
            </template>
            <carousel-button direction="right"
                             image-url="../../assets/button_foward.png"
                             on-button-clicked="_handlerButton"></carousel-button>
        </div>
    </template>

    <script>
        (function CarouselSliderDefinition() {
            'use strict';

            /**
             * @customElement
             * @polymer
             */
            class CarouselSlider extends Polymer.Element {
                static get is() {
                    return 'carousel-slider';
                }

                static get properties() {
                    return {
                        sliders: Array
                    };
                }

                _handlerButton(event) {
                    this.__moveCurrentIndex(event.detail.direction);
                }

                __moveCurrentIndex(direction) {
                    let index = 0;
                    for (let item of this.sliders) {
                        if (item.isCurrent) {
                            this.set(`sliders.${index}.isCurrent`, false);
                            switch (direction) {
                                case 'left':
                                    if (index === 0) {
                                        this.set(`sliders.${(this.sliders.length - 1)}.isCurrent`, true);
                                    } else {
                                        this.set(`sliders.${(index - 1)}.isCurrent`, true);
                                    }
                                    break;
                                case 'right':
                                    if (index === (this.sliders.length - 1)) {
                                        this.set(`sliders.0.isCurrent`, true);
                                    } else {
                                        this.set(`sliders.${(index + 1)}.isCurrent`, true);
                                    }
                                    break;
                            }
                            return;
                        }
                        index++;
                    }
                }
            }

            customElements.define(CarouselSlider.is, CarouselSlider);
        })(window.customElements);
    </script>
</dom-module>
